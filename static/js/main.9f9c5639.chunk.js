(this.webpackJsonptemplate=this.webpackJsonptemplate||[]).push([[0],{14:function(e,t,n){e.exports={makerDeepBlue:"#4064b5",makerWhite:"white",login:"login_login__2AYEV",container:"login_container__2bmqZ",title:"login_title__1SmzT",list:"login_list__3hb6Q",item:"login_item__1koXG",button:"login_button__151uA",span:"login_span__17yui"}},18:function(e,t,n){e.exports={makerGrey:"#d6d6d6",makerWhite:"white",student:"student_student__1Tf1W",profileimg:"student_profileimg__3HHAM"}},23:function(e,t,n){e.exports={makerDeepBlue:"#4064b5",makerWhite:"white",makerBlack:"#2f2f2f",makerGrey:"#d6d6d6",header:"header_header__1d7Ni",title:"header_title__37xky",search:"header_search__3ZoX2",searchbar:"header_searchbar__3PkOc",logout:"header_logout__1Mh-q"}},25:function(e,t,n){e.exports={makerGrey:"#d6d6d6",makerDeepBlue:"#4064b5",makerWhite:"white",container:"image_file_input_container__pPc_4",input:"image_file_input_input__2W_Ky",button:"image_file_input_button__1BrbZ",loading:"image_file_input_loading__3u7Fa",spin:"image_file_input_spin__1OGFj"}},28:function(e,t,n){e.exports={makerDeepBlue:"#4064b5",makerWhite:"white",preview:"preview_preview__37uMo",title:"preview_title__2NAHw",students:"preview_students__2sbPn"}},29:function(e,t,n){e.exports={maker:"maker_maker__3eTqJ",container:"maker_container__30Hoj",editor:"maker_editor__2iL2V"}},35:function(e,t,n){e.exports={makerDeepBlue:"#4064b5",makerWhite:"white",makerGrey:"#d6d6d6",editor:"editor_editor__1sr9J",title:"editor_title__3IDRx"}},40:function(e,t,n){e.exports={makerWhite:"white",makerGrey:"#d6d6d6",button:"button_button__3Xo2Z"}},46:function(e,t,n){},47:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(15),c=n(1),i=n(2),s=n.n(i),r=n(38),u=n.n(r),l=(n(46),n(26)),o=n(5),d=(n(47),n(14)),j=n.n(d),b=function(e){var t=e.authService,n=Object(o.f)(),a=function(e){n.push({pathname:"/maker",state:{id:e}})},s=function(e){t.login(e.currentTarget.textContent).then((function(e){return a(e.user.uid)}))};return Object(i.useEffect)((function(){t.onAuthChange((function(e){e&&a(e.uid)}))})),Object(c.jsx)("section",{className:j.a.login,children:Object(c.jsxs)("div",{className:j.a.container,children:[Object(c.jsx)("h1",{className:j.a.title,children:"\ub85c\uadf8\uc778"}),Object(c.jsxs)("ul",{className:j.a.list,children:[Object(c.jsx)("li",{className:j.a.item,children:Object(c.jsxs)("button",{className:j.a.button,onClick:s,children:[Object(c.jsx)("i",{className:"fab fa-google"}),Object(c.jsx)("span",{className:j.a.span,children:"Google"})]})}),Object(c.jsx)("li",{children:Object(c.jsxs)("button",{className:j.a.button,onClick:s,children:[Object(c.jsx)("i",{className:"fab fa-github"}),Object(c.jsx)("span",{className:j.a.span,children:"Github"})]})})]})]})})},f=n(12),m=n(40),p=n.n(m),h=Object(i.memo)((function(e){var t=e.name,n=e.onClick;return Object(c.jsx)("button",{className:p.a.button,onClick:n,children:t})})),_=n(7),O=n.n(_),x=Object(i.memo)((function(e){var t=e.FileInput,n=e.onAdd,a=Object(i.useRef)(),s=Object(i.useRef)(),r=Object(i.useRef)(),u=Object(i.useRef)(),l=Object(i.useRef)(),o=Object(i.useState)({fileName:null,fileURL:null}),d=Object(f.a)(o,2),j=d[0],b=d[1];return Object(c.jsxs)("form",{className:O.a.form,ref:a,children:[Object(c.jsxs)("div",{className:O.a.inputbox,children:[Object(c.jsx)("span",{className:O.a.title,children:"\uc774\ub984"}),Object(c.jsx)("input",{className:O.a.input,type:"text",name:"name",ref:s})]}),Object(c.jsxs)("div",{className:O.a.inputbox,children:[Object(c.jsx)("span",{className:O.a.title,children:"\uc131\ubcc4"}),Object(c.jsxs)("select",{name:"sex",className:O.a.select,ref:r,children:[Object(c.jsx)("option",{placeholder:"\uc5ec\uc131",children:"\uc5ec\uc131"}),Object(c.jsx)("option",{placeholder:"\ub0a8\uc131",children:"\ub0a8\uc131"})]})]}),Object(c.jsxs)("div",{className:O.a.inputbox,children:[Object(c.jsx)("span",{className:O.a.title,children:"\uc0dd\ub144\uc6d4\uc77c"}),Object(c.jsx)("input",{className:O.a.input,type:"date",name:"birth",ref:u})]}),Object(c.jsxs)("div",{className:O.a.inputbox,children:[Object(c.jsx)("span",{className:O.a.title,children:"\uc9c1\uc5c5"}),Object(c.jsx)("input",{className:O.a.input,type:"text",name:"job",ref:l})]}),Object(c.jsxs)("div",{className:O.a.buttonbox,children:[Object(c.jsx)("div",{className:O.a.fileInput,children:Object(c.jsx)(t,{name:j.fileName,onFileChange:function(e){b({fileName:e.name,fileURL:e.url})}})}),Object(c.jsx)(h,{className:O.a.button,name:"Add",onClick:function(e){e.preventDefault();var t={id:Date.now(),name:s.current.value||"",sex:r.current.value||"",birth:u.current.value||"",job:l.current.value||"",fileName:j.fileName||"",fileURL:j.fileURL||""};a.current.reset(),b({fileName:null,fileURL:null}),n(t)}})]})]})})),v=n(8),N=n.n(v),g=function(e){var t=e.student,n=e.FileInput,s=e.updateStudent,r=e.deleteStudent,u=Object(i.useRef)(),l=Object(i.useRef)(),o=Object(i.useRef)(),d=Object(i.useRef)(),j=Object(i.useRef)(),b=Object(i.useState)({fileName:null,fileURL:null}),m=Object(f.a)(b,2),p=m[0],_=m[1];Object(i.useEffect)((function(){u.current.reset()}),[t]);var O=t.name,x=t.sex,v=t.birth,g=t.job,k=function(e){if(null!=e.currentTarget){e.preventDefault();var n={id:t.id,name:l.current.value||"",sex:o.current.value||"",birth:d.current.value||"",job:j.current.value||"",fileName:p.fileName||"",fileURL:p.fileURL||""};s(n)}};return Object(c.jsxs)("form",{className:N.a.form,ref:u,children:[Object(c.jsxs)("div",{className:N.a.inputbox,children:[Object(c.jsx)("span",{className:N.a.title,children:"\uc774\ub984"}),Object(c.jsx)("input",{className:N.a.input,type:"text",name:"name",ref:l,defaultValue:O,onChange:k})]}),Object(c.jsxs)("div",{className:N.a.inputbox,children:[Object(c.jsx)("span",{className:N.a.title,children:"\uc131\ubcc4"}),Object(c.jsxs)("select",{name:"sex",className:N.a.select,ref:o,value:x,onChange:k,children:[Object(c.jsx)("option",{placeholder:"\uc5ec\uc131",children:"\uc5ec\uc131"}),Object(c.jsx)("option",{placeholder:"\ub0a8\uc131",children:"\ub0a8\uc131"})]})]}),Object(c.jsxs)("div",{className:N.a.inputbox,children:[Object(c.jsx)("span",{className:N.a.title,children:"\uc0dd\ub144\uc6d4\uc77c"}),Object(c.jsx)("input",{className:N.a.input,type:"date",name:"birth",ref:d,defaultValue:v,onChange:k})]}),Object(c.jsxs)("div",{className:N.a.inputbox,children:[Object(c.jsx)("span",{className:N.a.title,children:"\uc9c1\uc5c5"}),Object(c.jsx)("input",{className:N.a.input,type:"text",name:"job",ref:j,defaultValue:g,onChange:k})]}),Object(c.jsxs)("div",{className:N.a.buttonbox,children:[Object(c.jsx)("div",{className:N.a.fileInput,children:Object(c.jsx)(n,{name:p.fileName,onFileChange:function(e){s(Object(a.a)(Object(a.a)({},t),{},{fileName:e.name,fileURL:e.url})),_({fileName:e.name,fileURL:e.url})}})}),Object(c.jsx)(h,{className:N.a.button,name:"Delete",onClick:function(e){e.preventDefault(),r(t)}})]})]})},k=n(35),S=n.n(k),y=function(e){var t=e.FileInput,n=e.addStudent,a=e.selected,i=e.updateStudent,s=e.deleteStudent;return Object(c.jsxs)("section",{className:S.a.editor,children:[Object(c.jsx)("button",{className:S.a.title,children:"\uc218\uac15\uc0dd \uad00\ub9ac"}),Object(c.jsxs)("div",{children:[Object(c.jsx)(x,{FileInput:t,onAdd:n}),a&&Object(c.jsx)(g,{FileInput:t,student:a,deleteStudent:s,updateStudent:i})]})]})},w=n(23),R=n.n(w),C=Object(i.memo)((function(e){var t=e.onLogout,n=e.onSearch,a=Object(i.useRef)();return Object(c.jsxs)("header",{className:R.a.header,children:[Object(c.jsx)("h1",{className:R.a.title,children:"\uc218\uac15\uc0dd \uad00\ub9ac"}),Object(c.jsx)("div",{className:R.a.search,children:Object(c.jsx)("input",{ref:a,onKeyPress:function(e){"Enter"===e.key&&function(){var e=a.current.value;n(e)}()},className:R.a.searchbar,type:"search",placeholder:"Search.."})}),t&&Object(c.jsx)("button",{onClick:t,className:R.a.logout,children:"Logout"})]})})),I=n(18),F=n.n(I),G=Object(i.memo)((function(e){var t=e.student,n=e.onStudentClick,a=t.name,i=t.birth,s=t.sex,r=t.job,u=t.fileURL||"/student-management/images/default_profile.png";return Object(c.jsxs)("li",{className:F.a.student,onClick:function(){n(t)},children:[Object(c.jsx)("img",{className:F.a.profileimg,src:u,alt:"profile"}),Object(c.jsx)("span",{className:F.a.info,children:a}),Object(c.jsx)("span",{className:F.a.info,children:i}),Object(c.jsx)("span",{className:F.a.info,children:s}),Object(c.jsx)("span",{className:F.a.info,children:r})]})})),A=n(28),L=n.n(A),U=function(e){var t=e.students,n=e.value,a=e.onStudentClick,i=null;return null!=n&&(i=Object.values(t).filter((function(e){return e.name===n})),console.log(i),console.log(n)),Object(c.jsxs)("section",{className:L.a.preview,children:[Object(c.jsx)("button",{className:L.a.title,children:"\uc218\uac15\uc0dd \ubaa9\ub85d"}),Object(c.jsxs)("ul",{className:L.a.students,children:[!n&&Object.keys(t).map((function(e){return Object(c.jsx)(G,{onStudentClick:a,student:t[e]},e)})),i&&i.map((function(e){return Object(c.jsx)(G,{onStudentClick:a,student:t[e.id]},e.id)}))]})]})},D=n(29),W=n.n(D),P=function(e){var t=e.FileInput,n=e.authService,s=e.studentRepository,r=Object(o.f)().state,u=Object(o.f)(),l=Object(i.useState)({}),d=Object(f.a)(l,2),j=d[0],b=d[1],m=Object(i.useState)(null),p=Object(f.a)(m,2),h=p[0],_=p[1],O=Object(i.useState)(null),x=Object(f.a)(O,2),v=x[0],N=x[1],g=Object(i.useState)(r&&r.id),k=Object(f.a)(g,2),S=k[0],w=k[1],R=Object(i.useCallback)((function(){n.logout()}),[n]);Object(i.useEffect)((function(){if(S){var e=s.syncStudents(S,(function(e){b(e)}));return function(){e()}}}),[S]),Object(i.useEffect)((function(){n.onAuthChange((function(e){e?w(e.uid):u.push("/")}))}));var I=function(e){b((function(t){var n=Object(a.a)({},t);return n[e.id]=e,n})),s.saveStudent(S,e)};return Object(c.jsxs)("section",{className:W.a.maker,children:[Object(c.jsx)(C,{onLogout:R,onSearch:function(e){N(e)}}),Object(c.jsxs)("div",{className:W.a.container,children:[Object(c.jsx)("div",{className:W.a.editor,children:Object(c.jsx)(y,{selected:h,FileInput:t,addStudent:I,deleteStudent:function(e){b((function(t){var n=Object(a.a)({},t);return delete n[e.id],n})),s.removeStudent(S,e)},updateStudent:I})}),Object(c.jsx)(U,{value:v,onStudentClick:function(e){_(e)},students:j})]})]})};var T=function(e){var t=e.FileInput,n=e.authService,a=e.studentRepository;return Object(c.jsx)(l.a,{children:Object(c.jsxs)(o.c,{children:[Object(c.jsx)(o.a,{exact:!0,path:["/","/student-management"],children:Object(c.jsx)(b,{authService:n})}),Object(c.jsx)(o.a,{path:"/maker",children:Object(c.jsx)(P,{FileInput:t,studentRepository:a,authService:n})})]})})},V=(n(52),n(20)),B=n(21),E=n(30),q=(n(55),n(57),E.a.initializeApp({apiKey:"AIzaSyBsvSPFZqQgN_CjdmqwlbHIYgGUTSKlOvY",authDomain:"student-maker.firebaseapp.com",databaseURL:"https://student-maker-default-rtdb.firebaseio.com",projectId:"student-maker"})),H=q.auth(),Z=q.database(),K=new E.a.auth.GoogleAuthProvider,M=new E.a.auth.GithubAuthProvider,Y=function(){function e(){Object(V.a)(this,e)}return Object(B.a)(e,[{key:"login",value:function(e){var t=this.getProvider(e);return H.signInWithPopup(t)}},{key:"logout",value:function(){H.signOut()}},{key:"onAuthChange",value:function(e){H.onAuthStateChanged((function(t){e(t)}))}},{key:"getProvider",value:function(e){switch(e){case"Google":return K;case"Github":return M;default:throw new Error("not supported provider: ".concat(e))}}}]),e}(),z=n(22),J=n.n(z),Q=n(27),X=function(){function e(){Object(V.a)(this,e)}return Object(B.a)(e,[{key:"upload",value:function(){var e=Object(Q.a)(J.a.mark((function e(t){var n,a;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),n.append("upload_preset","p60eo8fr"),e.next=5,fetch("https://api.cloudinary.com/v1_1/darfixph8/image/upload",{method:"POST",body:n});case 5:return a=e.sent,e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),$=n(25),ee=n.n($),te=Object(i.memo)((function(e){var t=e.imageUploader,n=e.name,a=e.onFileChange,s=Object(i.useState)(!1),r=Object(f.a)(s,2),u=r[0],l=r[1],o=Object(i.useRef)(),d=function(){var e=Object(Q.a)(J.a.mark((function e(n){var c;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,t.upload(n.target.files[0]);case 3:c=e.sent,l(!1),a({name:c.original_filename,url:c.url});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:ee.a.container,children:[Object(c.jsx)("input",{ref:o,className:ee.a.input,type:"file",accept:"image/*",name:"file",onChange:d}),!u&&Object(c.jsx)("button",{className:ee.a.button,onClick:function(e){e.preventDefault(),o.current.click()},children:n||"No File"}),u&&Object(c.jsx)("div",{className:ee.a.loading})]})})),ne=function(){function e(){Object(V.a)(this,e)}return Object(B.a)(e,[{key:"syncStudents",value:function(e,t){var n=Z.ref("".concat(e,"/students"));return n.on("value",(function(e){var n=e.val();n&&t(n)})),function(){return n.off()}}},{key:"saveStudent",value:function(e,t){Z.ref("".concat(e,"/students/").concat(t.id)).set(t)}},{key:"removeStudent",value:function(e,t){Z.ref("".concat(e,"/students/").concat(t.id)).remove()}}]),e}(),ae=new Y,ce=new X,ie=new ne,se=Object(i.memo)((function(e){return Object(c.jsx)(te,Object(a.a)(Object(a.a)({},e),{},{imageUploader:ce}))}));u.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(T,{authService:ae,studentRepository:ie,FileInput:se})}),document.getElementById("root"))},7:function(e,t,n){e.exports={makerGrey:"#d6d6d6",makerWhite:"white",form:"add_form_form__2K09-",inputbox:"add_form_inputbox__1Y3RZ",title:"add_form_title__3VmpG",input:"add_form_input__2VTwN",select:"add_form_select__2Vg0V",buttonbox:"add_form_buttonbox__3eNoY",fileInput:"add_form_fileInput__13qft",button:"add_form_button__2eV82"}},8:function(e,t,n){e.exports={makerGrey:"#d6d6d6",makerWhite:"white",form:"edit_form_form__Rl2d_",inputbox:"edit_form_inputbox__3s5iC",title:"edit_form_title__1NTMt",input:"edit_form_input__3GQlT",select:"edit_form_select__2HkpI",buttonbox:"edit_form_buttonbox__AuWLW",fileInput:"edit_form_fileInput__3tPqP",button:"edit_form_button__3A4zQ"}}},[[61,1,2]]]);
//# sourceMappingURL=main.9f9c5639.chunk.js.map